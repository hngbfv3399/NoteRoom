# 변경 로그

## [1.4.0] - 2024-12-30

### 🔔 PWA 알림 시스템 완전 구현
- **Service Worker 기반 PWA 알림**
  - 완전한 PWA 지원 (Progressive Web App)
  - Service Worker를 통한 백그라운드 알림 처리
  - 오프라인 캐싱 및 성능 최적화
  - 알림 클릭 시 해당 노트/페이지로 자동 이동

- **통합 알림 시스템**
  - PWA 우선, 실패 시 브라우저 알림으로 fallback
  - 댓글, 대댓글, 멘션, 새 노트 알림 지원
  - 실시간 알림 수신 및 처리
  - 알림 권한 관리 시스템

- **알림 설정 UI 컴포넌트**
  - 설정 페이지에 전용 알림 설정 섹션 추가
  - 푸시 구독 활성화/비활성화 기능
  - 알림 권한 상태 실시간 표시
  - 알림 타입별 설명 및 안내

### 🔐 보안 및 데이터 관리
- **Firestore 보안 규칙 확장**
  - `pushSubscriptions` 컬렉션 규칙 추가
  - 사용자별 푸시 구독 정보 보호
  - 본인 또는 관리자만 접근 가능한 권한 체계

- **푸시 구독 정보 관리**
  - Firestore에 구독 정보 안전하게 저장
  - 구독 생성/해제 시 자동 DB 동기화
  - 구독 상태 실시간 추적

### 🎨 UI/UX 개선
- **테마 시스템 완전 통합**
  - 모든 알림 컴포넌트에 테마 적용
  - 다크모드/라이트모드 자동 대응
  - 일관된 디자인 언어 적용

- **반응형 알림 디자인**
  - 모바일/데스크톱 최적화
  - 터치 친화적 인터페이스
  - 접근성 고려된 디자인

### 📱 PWA 기능 강화
- **PWA Manifest 개선**
  - 앱 바로가기 추가 (새 노트 작성, 알림 확인)
  - 스크린샷 정보 추가
  - 카테고리, 언어, 방향 설정

- **Service Worker 최적화**
  - 효율적인 캐싱 전략
  - 백그라운드 동기화 지원
  - 알림 액션 버튼 (열기, 닫기)

### 🔧 기술적 개선
- **알림 유틸리티 함수 확장**
  - `showNotification()`: 통합 알림 함수
  - `subscribeToPush()`: 푸시 구독 관리
  - `savePushSubscriptionToFirestore()`: 구독 정보 저장
  - 각 알림 타입별 전용 함수들

- **Firebase 설정 최적화**
  - `firebase.json` 설정 개선
  - Service Worker 캐시 제어 헤더 추가
  - 빌드 디렉토리 설정 수정

### 📖 문서화
- **PWA_PUSH_SETUP.md 작성**
  - 완전한 PWA 알림 시스템 가이드
  - 기술적 구현 상세 설명
  - 사용 방법 및 주의사항
  - 디버깅 및 테스트 방법

### 🚀 배포 및 성능
- **프로덕션 배포 완료**
  - Firebase Hosting에 PWA 배포
  - HTTPS 환경에서 완전한 PWA 기능 지원
  - 실제 환경에서 푸시 알림 테스트 완료

- **성능 최적화**
  - 30초마다 새 알림 자동 확인
  - 효율적인 Firestore 쿼리 사용
  - 최적화된 번들 크기

### 💡 사용자 경험
- **직관적인 알림 관리**
  - 설정 페이지에서 원클릭 권한 설정
  - 알림 상태 실시간 피드백
  - 권한 거부 시 친절한 안내 메시지

- **완전한 알림 생태계**
  - 실시간 브라우저 알림 (앱 사용 중)
  - 알림 벨에서 놓친 알림 확인
  - 알림 클릭 시 관련 콘텐츠로 즉시 이동

---

## [1.3.0] - 2024-12-30

### ✨ 새로운 기능
- **대댓글(답글) 시스템 구현**
  - 댓글에 답글 작성 및 관리 기능
  - 대댓글 표시/숨기기 토글 기능
  - 대댓글 개수 표시
  - 대댓글별 신고 기능

- **대댓글 알림 시스템**
  - 브라우저 푸시 알림 (클릭 시 해당 게시글로 이동)
  - 토스트 메시지 알림
  - 헤더 알림 벨 시스템
  - 실시간 알림 업데이트

- **관리자 기능 확장**
  - 댓글 시스템 마이그레이션 기능
  - 기존 댓글에 ID 및 대댓글 필드 추가

### 🎨 디자인 개선
- **테마 시스템 대폭 확장**
  - `cardBg`: 카드 배경색
  - `textSecondary`: 보조 텍스트 색상
  - `linkColor`: 링크 색상
  - `hoverBg`: 호버 배경색
  - `borderColor`: 테두리 색상
  - `dividerColor`: 구분선 색상

- **CommentSection 디자인 개선**
  - 댓글과 대댓글 시각적 구분 강화
  - 호버 효과 및 인터랙션 개선
  - 답글 작성 폼 디자인 개선
  - 테마별 일관된 색상 적용

- **ReportButton 디자인 개선**
  - 테마 시스템 완전 통합
  - 다양한 크기 및 변형 지원
  - 호버 효과 개선

### 🔧 기술적 개선
- **Firestore 보안 규칙 업데이트**
  - 대댓글 관련 필드 업데이트 권한 추가
  - 관리자 마이그레이션 권한 설정

- **댓글 데이터 구조 확장**
  - 각 댓글에 고유 ID 추가
  - `replies` 배열 필드 추가
  - `replyCount` 필드 추가

- **새로운 유틸리티 함수**
  - `addReplyToComment()`: 대댓글 추가 함수
  - 대댓글 알림 생성 함수들
  - 브라우저 푸시 알림 유틸리티

### 🐛 버그 수정
- 테마 시스템 안정성 향상
- 알림 시스템 오류 처리 개선
- 댓글 정렬 및 표시 로직 개선

---

## [1.2.0] - 2024-12-29

### ✨ 새로운 기능
- **구독 시스템 구현**
  - 사용자 구독/구독취소 기능
  - 구독자 수 실시간 표시
  - 구독 상태 관리

- **알림 시스템 구현**
  - 댓글, 대댓글, 멘션, 새 노트 알림
  - 실시간 알림 업데이트
  - 읽지 않은 알림 개수 표시
  - 토스트 메시지 시스템

- **브라우저 푸시 알림**
  - 네이티브 브라우저 알림
  - 알림 클릭 시 해당 페이지로 이동
  - 권한 요청 시스템

### 🎨 UI/UX 개선
- **검색 기능 대폭 개선**
  - 실시간 검색 제안
  - 검색 히스토리 관리
  - 고급 필터 패널
  - 키보드 단축키 지원

- **프로필 이미지 시스템**
  - DiceBear API 아바타 시스템
  - 사용자 이름 기반 일관된 아바타
  - 6가지 배경색 자동 선택

### 🔧 기술적 개선
- Redux selector 메모이제이션
- 무한 스크롤 최적화
- Firestore 보안 규칙 강화
- 성능 최적화

---

## [1.1.0] - 2024-12-28

### ✨ 새로운 기능
- 기본 노트 작성 및 관리 시스템
- 댓글 시스템
- 사용자 인증 시스템
- 테마 시스템 (6가지 테마)

### 🎨 UI/UX
- 반응형 디자인
- 다크 모드 지원
- 모던한 UI 컴포넌트

### 🔧 기술 스택
- React 19
- Firebase (Auth, Firestore, Storage, Hosting)
- Redux Toolkit
- Tailwind CSS
- React Query 